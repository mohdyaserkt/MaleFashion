{{>user-header}}

    <!-- Shop Details Section Begin -->
    {{#each product}}
    <section class="shop-details">
        <div class="product__details__pic">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="product__details__breadcrumb">
                            <a href="/">Home</a>
                            <a href="/shop">Shop</a>
                            <span>Product Details</span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-3 col-md-3">
                        <ul class="nav nav-tabs" role="tablist">

                            {{#each image}}
                            <li class="nav-item">
                                <a class="nav-link active" data-toggle="tab" href="#tabs-1" role="tab">
                                    <div class="product__thumb__pic set-bg" data-setbg="" style="margin-bottom: 2rem;" >
                                    <img src="/productImages/{{this}}" alt="" id="{{inc @index}}" onclick="zoom(this.id)">
                                    </div>
                                </a>
                            </li>
                            {{/each}}
                            
                        </ul>
                        <script>
                            function zoom(id){
                               img= document.getElementById(id).src 
                               document.getElementById('imgView').src=img

                            }
                        </script>
                    </div>
                    <div class="col-lg-6 col-md-9">
                        <div class="tab-content">
                            
                            <div class="tab-pane active" id="tabs-3" role="tabpanel">
                                <div class="product__details__pic__item">
                                    
                                    <img style="height: 33rem" id="imgView" src="/productImages/{{image.[0]}}"  alt="">
                                </div>
                            </div>
                          
                        </div>
                    </div>
                </div>
            </div>
        </div>

        
        <div class="product__details__content">
            <div class="container">
                <div class="row d-flex justify-content-center">
                    <div class="col-lg-8">
                        <div class="product__details__text">
                            <h4>{{title}}</h4>
                            {{!-- <div class="rating">
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star-o"></i>
                                
                            </div> --}}
                            <h3>₹{{price}} <span></span></h3>
                            <p>{{description}}</p>

                            <form action="/user-addtocart/{{productid}}" method="post">
                            <div class="product__details__option">
                                <div class="product__details__option__size">
                                    <span>Size:</span>
                                    {{#each size}}
                                     <label  for="{{this}}">{{this}}
                                        <input required  name="size" value="{{this}}" type="radio" id="{{this}}">
                                    </label>
                                    {{/each}}
                        
                                </div>
                                <div class="product__details__option__color">
                                    <span>Color:</span>
                                    {{#each colour}}
                                    <label style="background-color: {{this}};" class="c-1" for="{{this}}">
                                        <input required name="colour" value="{{this}}" type="radio" id="{{this}}">
                                    </label>
                                    {{/each}}
                                </div>
                            </div>
                            <div class="product__details__cart__option">
                                <div class="quantity">
                                    <div class="pro-qty">
                                        <input name="quantity" type="text" value="1">
                                    </div>
                                </div>
                                {{#if (eq stock 0)}}

                                <button disabled class="primary-btn bg-danger">Out Of Stock</button>
                                {{else}}
                                <button type="submit" onclick="helo()" class="primary-btn">add to cart</button>
                                {{/if}}
                                <p class="text-danger" style="font-size: 13px;">{{adCrtMsg}}</p>
                            </div></form>
                            <div class="product__details__btns__option">
                                <i onclick="addToWishlist('{{productid}}')" class="fa fa-heart"></i> add to wishlist
                                
                            </div>
                            
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <div class="product__details__tab">
                            <ul class="nav nav-tabs" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#tabs-5"
                                    role="tab">Description</a>
                                </li>
                                
                            </ul>
                            <div class="tab-content">
                                <div class="tab-pane active" id="tabs-5" role="tabpanel">
                                    <div class="product__details__tab__content">
                                        <p class="note">{{title}}</p>
                                        <div class="product__details__tab__content__item">
                                            <h5>Products Infomation</h5>
                                            <p>{{productInformation}}</p>
                                            
                                        </div>
                                        {{!-- <div class="product__details__tab__content__item">
                                            <h5>Material used</h5>
                                            <p>Polyester is deemed lower quality due to its none natural quality’s. Made
                                                from synthetic materials, not natural like wool. Polyester suits become
                                                creased easily and are known for not being breathable. Polyester suits
                                                tend to have a shine to them compared to wool and cotton suits, this can
                                                make the suit look cheap. The texture of velvet is luxurious and
                                                breathable. Velvet is a great choice for dinner party jacket and can be
                                            worn all year round.</p>
                                        </div> --}}
                                    </div>
                                </div>
                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    {{/each}}
    <!-- Shop Details Section End -->

    <!-- Related Section Begin -->
    <section class="related spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h3 class="related-title">Related Product</h3>
                </div>
            </div>
            <div class="row">
                {{#each relatedProducts}}
                <div class="col-lg-3 col-md-6 col-sm-6 col-sm-6">
                    <div class="product__item">
                        <div style="height: 28rem;" class="product__item__pic set-bg" data-setbg="/productImages/{{image.[0]}}">
                            <ul class="product__hover">
                                <li onclick="addToWishlist('{{productid}}')"><img src="/img/icon/heart.png" alt=""></li>
                                {{!-- <li><a href="#"><img src="/img/icon/compare.png" alt=""> <span>Compare</span></a></li> --}}
                                <li><a href="#"><img src="/img/icon/search.png" alt=""></a></li>
                            </ul>
                        </div>
                        <div class="product__item__text">
                            <h6>{{title}}</h6>
                            <a href="/product-details/{{_id}}" class="add-cart">+ Add To Cart</a>
                            {{!-- <div class="rating">
                                <i class="fa fa-star-o"></i>
                                <i class="fa fa-star-o"></i>
                                <i class="fa fa-star-o"></i>
                                <i class="fa fa-star-o"></i>
                                <i class="fa fa-star-o"></i>
                            </div> --}}
                            <h5>₹{{price}}</h5>
                            {{!-- <div class="product__color__select">
                                <label for="pc-4">
                                    <input type="radio" id="pc-4">
                                </label>
                                <label class="active black" for="pc-5">
                                    <input type="radio" id="pc-5">
                                </label>
                                <label class="grey" for="pc-6">
                                    <input type="radio" id="pc-6">
                                </label>
                            </div> --}}
                        </div>
                    </div>
                </div>
                {{/each}}
                
                
            </div>
        </div>
    </section>
    <!-- Related Section End -->
    <script>
        function helo(){
        const Toast = Swal.mixin({
                                        toast: true,
                                        position: 'top-end',
                                        showConfirmButton: false,
                                        iconColor: '#a5dc86',
                                        background: 'black',
                                        color: '#a5dc86',

                                        timer: 3000,
                                        timerProgressBar: true,
                                        didOpen: (toast) => {
                                            toast.addEventListener('mouseenter', Swal.stopTimer)
                                            toast.addEventListener('mouseleave', Swal.resumeTimer)
                                        }
                                    })

                                    Toast.fire({
                                        icon: 'success',
                                        title: 'Product Added TO Wishlist'
                                    })
    </script>

    

  {{>user-footer}}
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script>
                    function addToWishlist(id) {

                        $.ajax({
                            url: '/add-to-wishlist',
                            data: {
                                productid: id
                            },
                            method: 'POST',
                            success: (response) => {
                                if (response.status == true) {


                                    const Toast = Swal.mixin({
                                        toast: true,
                                        position: 'top-end',
                                        showConfirmButton: false,
                                        iconColor: '#a5dc86',
                                        background: 'black',
                                        color: '#a5dc86',

                                        timer: 3000,
                                        timerProgressBar: true,
                                        didOpen: (toast) => {
                                            toast.addEventListener('mouseenter', Swal.stopTimer)
                                            toast.addEventListener('mouseleave', Swal.resumeTimer)
                                        }
                                    })

                                    Toast.fire({
                                        icon: 'success',
                                        title: 'Product Added TO Wishlist'
                                    })



                                }
                            }
                        })


                    }
                </script>